from django.contrib import admin
from django.http import JsonResponse
from django.urls import path, include

def api_root(request):
    """
    Root API endpoint that returns a simple message.
    Useful for testing if the API is running correctly.
    """
    return JsonResponse({
        "message": "API is working!",
        "endpoints": {
            "auth": "/api/register/, /api/login/, /api/token/refresh/",
            "loans": "/api/loans/",
            "admin": "/admin/",
        },
        "documentation": "See API documentation for detailed endpoint information"
    })

urlpatterns = [
    # API Root - Basic health check and API information
    path("api/", api_root, name="api-root"),
    
    # Django Admin Interface - For administrative tasks
    path("admin/", admin.site.urls, name="admin-panel"),
    
    # Authentication & User Management Endpoints
    # Includes: registration, login, token refresh, user management
    path("api/", include("users.urls"), name="user-api"),
    
    # Loan Management Endpoints
    # Includes: loan creation, listing, foreclosure, approval, deletion
    path("api/loans/", include("loans.urls"), name="loan-api"),
]

# Optional: Add URL patterns for development debug toolbar
# if settings.DEBUG:
#     import debug_toolbar
#     urlpatterns = [
#         path('__debug__/', include(debug_toolbar.urls)),
#     ] + urlpatterns